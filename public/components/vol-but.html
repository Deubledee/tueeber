<!--
@license
Copyright (c) 2016 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->
<link rel="import" href="../bower_components/polymer/polymer-element.html">
<dom-module id="vol-but">
    <template>
        <style>
            :host {
                display: block;
                --primary-color: var(--paper-red-500);
                --primary-text-color: #fff;
                --paper-toggle-button-unchecked-bar-color: #888;
            }

            .scale {
                position: relative;
                opacity: 0;
                top: 9px;
                z-index: 0;
                width: auto;
                height: 0px;
                -webkit-transition: all 0.5s ease-in-out;
                -moz-transition: all 0.5s ease-in-out;
                transition: all 0.5s ease-in-out;
            }

            .scale[show] {
                position: relative;
                opacity: 1;
                z-index: 1;
                width: auto;
                height: 31px;
                margin-bottom: 23px;
            }


            .thirtyOne {
                position: relative;
                height: 31px;
                width: auto;
                z-index: 3;
                float: left;
                padding-right: 2.3%;
                padding-left: 2.3%;
            }

            .fullVol {
                background: linear-gradient(to bottom right, rgba(210, 210, 210, 0.0196078431372549) 1%, rgba(0, 0, 0, 0) 53%, rgba(109, 112, 150, 0.72) 76%, #4b4a90 101%);
                /* position: relative; */
                /* margin-bottom: 0px; */
                /* top: 0px; */
                /* width: 100%; */
                height: 15px;
                opacity: 0.5;
                transition: width 0.5s ease 0.5s;
            }

            .fullVolup {
                background: linear-gradient(to bottom, rgba(210, 210, 210, 0.0196078431372549) 1%, rgba(0, 0, 0, 0) 53%, rgba(109, 112, 150, 0.72) 0%, #4b4a90 101%);
                width: 100%;
                float: left;
                height: 15px;
                opacity: 0.5;
                ;
            }

            .wrapper {
                position: relative;
                margin-bottom: 0px;
                left: 2%;
                top: 7px;
                width: 87%;
                height: 15px;
                ;
            }

            .navol {
                position: relative;
                width: 100%;
                color: #5e8aab;
                font-size: 11px;
                top: -13px;
            }
        </style>
        <div class="wrapper" id="fullVlVal">
            <div class="fullVolup" id="_0"></div>
        </div>
        <div class=" navol">
            <div class="scale" show$="[[show]]" on-track="setVolume">
                <div class="thirtyOne">0</div>
                <div class="thirtyOne">10</div>
                <div class="thirtyOne">20</div>
                <div class="thirtyOne">30</div>
                <div class="thirtyOne">40</div>
                <div class="thirtyOne">50</div>
                <div class="thirtyOne">60</div>
                <div class="thirtyOne">70</div>
                <div class="thirtyOne">80</div>
                <div class="thirtyOne">90</div>
                <div class="thirtyOne">100</div>
            </div>
        </div>
    </template>
    <script>
        class volBut extends Polymer.Element {
            static get is() {
                return 'vol-but';
            }
            constructor() {
                super();
            }
            ready() {
                super.ready()

            }
            static get properties() {
                return {
                    show: {
                        type: Boolean,
                        value: false,
                        notify: true,
                        reflectToAttribute: true,
                        observer: 'log'
                    },
                    showMe: {
                        type: Boolean,
                        value: false,
                        notify: true,
                        observer: '_show'
                    }
                }
            }
            log(data) {
                console.log(data)
            }
            _show(data) {
                this.show = !this.show
            }
            setVolume(e) {
                let volVal = ((e.detail.x / 30).toString().split(".").join(""))
                volVal = volVal.length <= 2 ? parseInt(volVal) : parseInt(volVal.slice(0, 2))
                if (e.detail.x > 300) {
                    volVal = 100
                }
                let elem = e.detail.hover()
                if (elem.classList.contains("thirtyOne")) {
                    elem.style.fontSize = "15px"
                    elem.style.color = "#5fa09b"
                    elem.style.transition = 'fontSize 0.2 ease'
                    this.$.fullVlVal.style.width = `${e.detail.x}px` //volVal + "%" 
                    setTimeout(() => {
                        elem.style.fontSize = "11px"
                        elem.style.color = "#5e8aab"

                    }, 500)
                }
                this.$.player.$.player.setVolume(volVal)
            }
        }
        window.customElements.define(volBut.is, volBut);
    </script>
</dom-module>